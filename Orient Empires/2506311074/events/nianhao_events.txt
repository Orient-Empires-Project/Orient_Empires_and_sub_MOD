namespace = nianhao
nianhao.1 = {
	type = character_event
	title = nianhao.1.t
	desc = nianhao.1.desc
	theme = crown
	left_portrait = {
		character = root
	}

	immediate = {

	}

	widget = {
		gui = "event_window_widget_enter_text"
		container = "dynamic_birth_name"
		controller = {
			type = text
			data = {	
				key = custom_nianhao_new
				default = {
					localization_key = nianhao_cus
				}
				default = {
					localization_key = nianhao_1
					trigger = {
						has_character_flag = nianhao_1
					}
				}
				default = {
					localization_key = nianhao_2
					trigger = {
						has_character_flag = nianhao_2
					}
				}
				default = {
					localization_key = nianhao_3
					trigger = {
						has_character_flag = nianhao_3
					}
				}
			}
		}
		setup_scope = {
			root = { save_scope_as = text_target }
		}
	}

	option = { 
		name = newnianhao.a

		remove_variable = custom_nianhao_new
		remove_variable = nianhao_date

		remove_character_flag = nianhao_81
		remove_character_flag = nianhao_1	
		remove_character_flag = nianhao_2
		remove_character_flag = nianhao_3
		remove_character_flag = nianhao_4
		remove_character_flag = nianhao_5
		remove_character_flag = nianhao_6
		remove_character_flag = nianhao_7
		remove_character_flag = nianhao_8
		remove_character_flag = nianhao_9
		remove_character_flag = nianhao_10
		remove_character_flag = nianhao_11
		remove_character_flag = nianhao_12
		remove_character_flag = nianhao_13
		remove_character_flag = nianhao_14
		remove_character_flag = nianhao_15
		remove_character_flag = nianhao_16
		remove_character_flag = nianhao_17
		remove_character_flag = nianhao_18
		remove_character_flag = nianhao_19
		remove_character_flag = nianhao_20
		remove_character_flag = nianhao_21
		remove_character_flag = nianhao_22
		remove_character_flag = nianhao_23
		remove_character_flag = nianhao_24
		remove_character_flag = nianhao_25
		remove_character_flag = nianhao_26
		remove_character_flag = nianhao_27
		remove_character_flag = nianhao_28
		remove_character_flag = nianhao_29
		remove_character_flag = nianhao_30
		remove_character_flag = nianhao_31
		remove_character_flag = nianhao_32
		remove_character_flag = nianhao_33
		remove_character_flag = nianhao_34
		remove_character_flag = nianhao_35
		remove_character_flag = nianhao_36
		remove_character_flag = nianhao_37
		remove_character_flag = nianhao_38
		remove_character_flag = nianhao_39
		remove_character_flag = nianhao_40
		remove_character_flag = nianhao_41
		remove_character_flag = nianhao_42
		remove_character_flag = nianhao_43
		remove_character_flag = nianhao_44
		remove_character_flag = nianhao_45
		remove_character_flag = nianhao_46
		remove_character_flag = nianhao_47
		remove_character_flag = nianhao_48
		remove_character_flag = nianhao_49
		remove_character_flag = nianhao_50
		remove_character_flag = nianhao_51
		remove_character_flag = nianhao_52
		remove_character_flag = nianhao_53
		remove_character_flag = nianhao_54
		remove_character_flag = nianhao_55
		remove_character_flag = nianhao_56
		remove_character_flag = nianhao_57
		remove_character_flag = nianhao_58
		remove_character_flag = nianhao_59
		remove_character_flag = nianhao_60
		remove_character_flag = nianhao_61
		remove_character_flag = nianhao_62
		remove_character_flag = nianhao_63
		remove_character_flag = nianhao_64
		remove_character_flag = nianhao_65
		remove_character_flag = nianhao_66
		remove_character_flag = nianhao_67
		remove_character_flag = nianhao_68
		remove_character_flag = nianhao_69
		remove_character_flag = nianhao_70
		remove_character_flag = nianhao_71
		remove_character_flag = nianhao_72
		remove_character_flag = nianhao_73
		remove_character_flag = nianhao_74
		remove_character_flag = nianhao_75
		remove_character_flag = nianhao_76
		remove_character_flag = nianhao_77
		remove_character_flag = nianhao_78
		remove_character_flag = nianhao_79
		remove_character_flag = nianhao_80			
		remove_character_flag = nianhao_82
		remove_character_flag = nianhao_83
		remove_character_flag = nianhao_84
		remove_character_flag = nianhao_85
		remove_character_flag = nianhao_86
		remove_character_flag = nianhao_87
		remove_character_flag = nianhao_88
		if = {
			# We entered custom text into the pop up
			limit = { NOT = { has_variable = custom_nianhao_new } }
			set_variable = {
				name = custom_nianhao_new
				value = flag:custom
			}
			set_variable = {
				name = nianhao_date
				value = 1
			}
		}
	}

	option = { 
		name = newnianhao.b
	}

	after = {

	}
}


nianhao.2 = {
	type = character_event
	title = zunhao.1.t
	desc = zunhao.1.desc
	theme = crown
	left_portrait = {
		character = root
	}

	immediate = {
		remove_variable = custom_zunhao_new	
	}

	widget = {
		gui = "event_window_widget_enter_text"
		container = "dynamic_birth_name"
		controller = {
			type = text
			data = {
				key = custom_zunhao_new
				default = {
					localization_key = zunhao_cus
				}
				default = {
					localization_key = zunhao_1
					trigger = {
						has_character_flag = zunhao_1
					}
				}
			}
		}
		setup_scope = {
			root = { save_scope_as = text_target }
		}
	}

	option = { 
		name = newzunhao.a
		if = {
			# We entered custom text into the pop up
			limit = { NOT = { has_variable = custom_zunhao_new } }
			set_variable = {
				name = custom_zunhao_new
				value = flag:custom
			}
		}
	}
}



nianhao.3 = {
	type = character_event
	title = zunhao.2.t
	desc = zunhao.2.desc
	theme = crown
	left_portrait = {
		character = root
	}
	right_portrait = {
		character = scope:death_man
	}

	immediate = {
		root = { save_scope_as = actor }
		remove_variable = custom_zunhao_new
		scope:recipient = {
			add_random_guohao_effect = yes
			add_random_junhao_effect = yes
			add_random_junhao_effect = yes
			add_random_junhao_effect = yes
		}
		play_music_cue = "mx_cue_low_key_positive"
	}

	widget = {
		gui = "event_window_widget_enter_text"
		container = "dynamic_birth_name"
		controller = {
			type = text
			data = {
				key = custom_zunhao_new
				#default = {
					#localization_key = zunhao_cus
				#}
				default = {
					localization_key = RECIPIENT_NAME
				}

				default = {
					localization_key = hanfan_youzhou_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_youzhou } }
				}
				default = {
					localization_key = hanfan_liaodong_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_liaodong } }
				}
				default = {
					localization_key = hanfan_liaoxi_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_liaoxi } }
				}
				default = {
					localization_key = hanfan_biansong_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_biansong } }
				}
				default = {
					localization_key = hanfan_chengde_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_chengde } }
				}
				default = {
					localization_key = hanfan_xingci_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_xingci } }
				}
				default = {
					localization_key = hanfan_zelu_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_zelu } }
				}
				default = {
					localization_key = hanfan_lulong_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_lulong } }
				}
				default = {
					localization_key = hanfan_yingmo_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_yingmo } }
				}
				default = {
					localization_key = hanfan_yiding_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_yiding } }
				}
				default = {
					localization_key = hanfan_weibo_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_weibo } }
				}
				default = {
					localization_key = hanfan_xiangwei_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_xiangwei } }
				}
				default = {
					localization_key = hanfan_henghai_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_henghai } }
				}
				default = {
					localization_key = hanfan_zhenwu_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_zhenwu } }
				}
				default = {
					localization_key = hanfan_fengzhou_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_fengzhou } }
				}
				default = {
					localization_key = hanfan_ordos_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_ordos } }
				}
				default = {
					localization_key = hanfan_hedong_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_hedong } }
				}
				default = {
					localization_key = hanfan_yunzhong_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_yunzhong } }
				}
				default = {
					localization_key = hanfan_yanmen_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_yanmen } }
				}
				default = {
					localization_key = hanfan_hezhong_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_hezhong } }
				}
				default = {
					localization_key = hanfan_xiazhou_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_xiazhou } }
				}
				default = {
					localization_key = hanfan_xia_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_xia } }
				}
				default = {
					localization_key = hanfan_shuofang_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_shuofang } }
				}
				default = {
					localization_key = hanfan_fengxiang_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_fengxiang } }
				}
				default = {
					localization_key = hanfan_jingyuan_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_jingyuan } }
				}
				default = {
					localization_key = hanfan_longxi_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_longxi } }
				}
				default = {
					localization_key = hanfan_longnan_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_longnan } }
				}
				default = {
					localization_key = hanfan_xijing_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_xijing } }
				}
				default = {
					localization_key = hanfan_pingyi_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_pingyi } }
				}
				default = {
					localization_key = hanfan_binning_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_binning } }
				}
				default = {
					localization_key = hanfan_fufang_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_fufang } }
				}
				default = {
					localization_key = hanfan_jinshang_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_jinshang } }
				}
				default = {
					localization_key = hanfan_xichuan_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_xichuan } }
				}
				default = {
					localization_key = hanfan_hanzhong_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_hanzhong } }
				}
				default = {
					localization_key = hanfan_dongchuan_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_dongchuan } }
				}
				default = {
					localization_key = hanfan_yongping_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_yongping } }
				}
				default = {
					localization_key = hanfan_ba_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_ba } }
				}
				default = {
					localization_key = hanfan_ningjiang_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_ningjiang } }
				}
				default = {
					localization_key = hanfan_heluo_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_heluo } }
				}
				default = {
					localization_key = hanfan_shaanguo_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_shaanguo } }
				}
				default = {
					localization_key = hanfan_zhenghua_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_zhenghua } }
				}
				default = {
					localization_key = hanfan_heyang_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_heyang } }
				}
				default = {
					localization_key = hanfan_pucao_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_pucao } }
				}
				default = {
					localization_key = hanfan_denglai_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_denglai } }
				}
				default = {
					localization_key = hanfan_yihai_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_yihai } }
				}
				default = {
					localization_key = hanfan_jingxiang_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_jingxiang } }
				}
				default = {
					localization_key = hanfan_jingnan_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_jingnan } }
				}
				default = {
					localization_key = hanfan_eyue_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_eyue } }
				}
				default = {
					localization_key = hanfan_hunan_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_hunan } }
				}
				default = {
					localization_key = hanfan_huainan_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_huainan } }
				}
				default = {
					localization_key = hanfan_huaixi_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_huaixi } }
				}
				default = {
					localization_key = hanfan_zhenhai_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_zhenhai } }
				}
				default = {
					localization_key = hanfan_xuanshe_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_xuanshe } }
				}
				default = {
					localization_key = hanfan_jiangxi_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_jiangxi } }
				}
				default = {
					localization_key = hanfan_zhexi_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_zhexi } }
				}
				default = {
					localization_key = hanfan_zhedong_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_zhedong } }
				}
				default = {
					localization_key = hanfan_fujian_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_fujian } }
				}
				default = {
					localization_key = hanfan_qianzhong_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_qianzhong } }
				}
				default = {
					localization_key = hanfan_lingnan_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_lingnan } }
				}
				default = {
					localization_key = hanfan_chaoshan_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_chaoshan } }
				}
				default = {
					localization_key = hanfan_qiongya_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_qiongya } }
				}
				default = {
					localization_key = hanfan_rongguan_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_rongguan } }
				}
				default = {
					localization_key = hanfan_guiguan_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_guiguan } }
				}
				default = {
					localization_key = hanfan_yongguan_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_yongguan } }
				}
				default = {
					localization_key = hanfan_jiaozhou_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_jiaozhou } }
				}
				default = {
					localization_key = hanfan_dali_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_dali } }
				}
				default = {
					localization_key = hanfan_tuodong_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_tuodong } }
				}
				default = {
					localization_key = hanfan_huichuan_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_huichuan } }
				}
				default = {
					localization_key = hanfan_tonghai_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_tonghai } }
				}
				default = {
					localization_key = hanfan_jiuzhen_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_jiuzhen } }
				}
				default = {
					localization_key = hanfan_wuxi_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_wuxi } }
				}
				default = {
					localization_key = hanfan_zangke_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_zangke } }
				}
				default = {
					localization_key = hanfan_jianchuan_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_jianchuan } }
				}
				default = {
					localization_key = hanfan_yinsheng_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_yinsheng } }
				}
				default = {
					localization_key = hanfan_yongchang_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_yongchang } }
				}
				default = {
					localization_key = hanfan_luodian_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_luodian } }
				}
				default = {
					localization_key = hanfan_hepu_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_hepu } }
				}
				default = {
					localization_key = hanfan_luling_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_luling } }
				}
				default = {
					localization_key = hanfan_poyang_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_poyang } }
				}
				default = {
					localization_key = hanfan_xihe_guo
					trigger = { scope:recipient = { has_character_flag = hanfan_d_xihe } }
				}
				default = {
					localization_key = Zhongshan
					trigger = { scope:recipient = { has_character_flag = Zhongshan } }
				}
				default = {
					localization_key = hanfan_yingzhou_liaoxi
					trigger = { scope:recipient = { has_character_flag = hanfan_yingzhou_liaoxi } }
				}
				default = {
					localization_key = hanfan_liaodong
					trigger = { scope:recipient = { has_character_flag = hanfan_liaodong } }
				}
				default = {
					localization_key = hanfan_zhaozhou
					trigger = { scope:recipient = { has_character_flag = hanfan_zhaozhou } }
				}
				default = {
					localization_key = hanfan_jizhou_zhao
					trigger = { scope:recipient = { has_character_flag = hanfan_jizhou_zhao } }
				}
				default = {
					localization_key = hanfan_shenzhou_hebei
					trigger = { scope:recipient = { has_character_flag = hanfan_shenzhou_hebei } }
				}
				default = {
					localization_key = hanfan_hengzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_hengzhou } }
				}
				default = {
					localization_key = hanfan_xingzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_xingzhou } }
				}
				default = {
					localization_key = hanfan_cizhou
					trigger = { scope:recipient = { has_character_flag = hanfan_cizhou } }
				}
				default = {
					localization_key = hanfan_mingzhou_hebei
					trigger = { scope:recipient = { has_character_flag = hanfan_mingzhou_hebei } }
				}
				default = {
					localization_key = hanfan_luzhou_jin
					trigger = { scope:recipient = { has_character_flag = hanfan_luzhou_jin } }
				}
				default = {
					localization_key = hanfan_zezhou
					trigger = { scope:recipient = { has_character_flag = hanfan_zezhou } }
				}
				default = {
					localization_key = hanfan_youzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_youzhou } }
				}
				default = {
					localization_key = hanfan_guzhu
					trigger = { scope:recipient = { has_character_flag = hanfan_guzhu } }
				}
				default = {
					localization_key = hanfan_guizhou_yan
					trigger = { scope:recipient = { has_character_flag = hanfan_guizhou_yan } }
				}
				default = {
					localization_key = hanfan_pingzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_pingzhou } }
				}
				default = {
					localization_key = hanfan_jizhou_yan
					trigger = { scope:recipient = { has_character_flag = hanfan_jizhou_yan } }
				}
				default = {
					localization_key = hanfan_yingzhou_ji
					trigger = { scope:recipient = { has_character_flag = hanfan_yingzhou_ji } }
				}
				default = {
					localization_key = hanfan_mozhou
					trigger = { scope:recipient = { has_character_flag = hanfan_mozhou } }
				}
				default = {
					localization_key = hanfan_yizhou_yan
					trigger = { scope:recipient = { has_character_flag = hanfan_yizhou_yan } }
				}
				default = {
					localization_key = hanfan_dingzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_dingzhou } }
				}
				default = {
					localization_key = hanfan_weizhou
					trigger = { scope:recipient = { has_character_flag = hanfan_weizhou } }
				}
				default = {
					localization_key = hanfan_bozhou_wei
					trigger = { scope:recipient = { has_character_flag = hanfan_bozhou_wei } }
				}
				default = {
					localization_key = hanfan_beizhou
					trigger = { scope:recipient = { has_character_flag = hanfan_beizhou } }
				}
				default = {
					localization_key = hanfan_weizhou_ji
					trigger = { scope:recipient = { has_character_flag = hanfan_weizhou_ji } }
				}
				default = {
					localization_key = hanfan_xiangzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_xiangzhou } }
				}
				default = {
					localization_key = hanfan_cangzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_cangzhou } }
				}
				default = {
					localization_key = hanfan_dizhou
					trigger = { scope:recipient = { has_character_flag = hanfan_dizhou } }
				}
				default = {
					localization_key = hanfan_dezhou_wei
					trigger = { scope:recipient = { has_character_flag = hanfan_dezhou_wei } }
				}
				default = {
					localization_key = hanfan_chanyufu
					trigger = { scope:recipient = { has_character_flag = hanfan_chanyufu } }
				}
				default = {
					localization_key = hanfan_mogols
					trigger = { scope:recipient = { has_character_flag = hanfan_mogols } }
				}
				default = {
					localization_key = hanfan_shengzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_shengzhou } }
				}
				default = {
					localization_key = hanfan_xuandezhou
					trigger = { scope:recipient = { has_character_flag = hanfan_xuandezhou } }
				}
				default = {
					localization_key = hanfan_tiandejun
					trigger = { scope:recipient = { has_character_flag = hanfan_tiandejun } }
				}
				default = {
					localization_key = hanfan_westsurrended
					trigger = { scope:recipient = { has_character_flag = hanfan_westsurrended } }
				}
				default = {
					localization_key = hanfan_midsurrended
					trigger = { scope:recipient = { has_character_flag = hanfan_midsurrended } }
				}
				default = {
					localization_key = hanfan_linzhou_shaan
					trigger = { scope:recipient = { has_character_flag = hanfan_linzhou_shaan } }
				}
				default = {
					localization_key = hanfan_youzhou_shuofang
					trigger = { scope:recipient = { has_character_flag = hanfan_youzhou_shuofang } }
				}
				default = {
					localization_key = hanfan_taiyuan
					trigger = { scope:recipient = { has_character_flag = hanfan_taiyuan } }
				}
				default = {
					localization_key = hanfan_chengtianjun
					trigger = { scope:recipient = { has_character_flag = hanfan_chengtianjun } }
				}
				default = {
					localization_key = hanfan_yizhou_hedong
					trigger = { scope:recipient = { has_character_flag = hanfan_yizhou_hedong } }
				}
				default = {
					localization_key = hanfan_lanzhou_hedong
					trigger = { scope:recipient = { has_character_flag = hanfan_lanzhou_hedong } }
				}
				default = {
					localization_key = hanfan_hequ
					trigger = { scope:recipient = { has_character_flag = hanfan_hequ } }
				}
				default = {
					localization_key = hanfan_shizhou
					trigger = { scope:recipient = { has_character_flag = hanfan_shizhou } }
				}
				default = {
					localization_key = hanfan_qinzhou_hedong
					trigger = { scope:recipient = { has_character_flag = hanfan_qinzhou_hedong } }
				}
				default = {
					localization_key = hanfan_fenzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_fenzhou } }
				}
				default = {
					localization_key = hanfan_yunzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_yunzhou } }
				}
				default = {
					localization_key = hanfan_shuozhou
					trigger = { scope:recipient = { has_character_flag = hanfan_shuozhou } }
				}
				default = {
					localization_key = hanfan_jingbianjun
					trigger = { scope:recipient = { has_character_flag = hanfan_jingbianjun } }
				}
				default = {
					localization_key = hanfan_yingzhou_jin
					trigger = { scope:recipient = { has_character_flag = hanfan_yingzhou_jin } }
				}
				default = {
					localization_key = hanfan_daizhou
					trigger = { scope:recipient = { has_character_flag = hanfan_daizhou } }
				}
				default = {
					localization_key = hanfan_yuzhou_dai
					trigger = { scope:recipient = { has_character_flag = hanfan_yuzhou_dai } }
				}
				default = {
					localization_key = hanfan_xinzhou_dai
					trigger = { scope:recipient = { has_character_flag = hanfan_xinzhou_dai } }
				}
				default = {
					localization_key = hanfan_jiangzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_jiangzhou } }
				}
				default = {
					localization_key = hanfan_xizhou_hezhong
					trigger = { scope:recipient = { has_character_flag = hanfan_xizhou_hezhong } }
				}
				default = {
					localization_key = hanfan_cizhou_hezhong
					trigger = { scope:recipient = { has_character_flag = hanfan_cizhou_hezhong } }
				}
				default = {
					localization_key = hanfan_puzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_puzhou } }
				}
				default = {
					localization_key = hanfan_jinzhou_hezhong
					trigger = { scope:recipient = { has_character_flag = hanfan_jinzhou_hezhong } }
				}
				default = {
					localization_key = hanfan_xiazhou
					trigger = { scope:recipient = { has_character_flag = hanfan_xiazhou } }
				}
				default = {
					localization_key = hanfan_yinzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_yinzhou } }
				}
				default = {
					localization_key = hanfan_suizhou_xia
					trigger = { scope:recipient = { has_character_flag = hanfan_suizhou_xia } }
				}
				default = {
					localization_key = hanfan_gaolan
					trigger = { scope:recipient = { has_character_flag = hanfan_gaolan } }
				}
				default = {
					localization_key = hanfan_yanzhou_shuofang
					trigger = { scope:recipient = { has_character_flag = hanfan_yanzhou_shuofang } }
				}
				default = {
					localization_key = hanfan_anle
					trigger = { scope:recipient = { has_character_flag = hanfan_anle } }
				}
				default = {
					localization_key = hanfan_huizhou
					trigger = { scope:recipient = { has_character_flag = hanfan_huizhou } }
				}
				default = {
					localization_key = hanfan_fengxiang
					trigger = { scope:recipient = { has_character_flag = hanfan_fengxiang } }
				}
				default = {
					localization_key = hanfan_longzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_longzhou } }
				}
				default = {
					localization_key = hanfan_yuanzou_xia
					trigger = { scope:recipient = { has_character_flag = hanfan_yuanzou_xia } }
				}
				default = {
					localization_key = hanfan_jingzhou_xia
					trigger = { scope:recipient = { has_character_flag = hanfan_jingzhou_xia } }
				}
				default = {
					localization_key = hanfan_tianshui
					trigger = { scope:recipient = { has_character_flag = hanfan_tianshui } }
				}
				default = {
					localization_key = hanfan_weizhou_longxi
					trigger = { scope:recipient = { has_character_flag = hanfan_weizhou_longxi } }
				}
				default = {
					localization_key = hanfan_minzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_minzhou } }
				}
				default = {
					localization_key = hanfan_qiuchi
					trigger = { scope:recipient = { has_character_flag = hanfan_qiuchi } }
				}
				default = {
					localization_key = hanfan_wudu
					trigger = { scope:recipient = { has_character_flag = hanfan_wudu } }
				}
				default = {
					localization_key = hanfan_changan
					trigger = { scope:recipient = { has_character_flag = hanfan_changan } }
				}
				default = {
					localization_key = hanfan_xianyang
					trigger = { scope:recipient = { has_character_flag = hanfan_xianyang } }
				}
				default = {
					localization_key = hanfan_wugong
					trigger = { scope:recipient = { has_character_flag = hanfan_wugong } }
				}
				default = {
					localization_key = hanfan_huazhou_pingyi
					trigger = { scope:recipient = { has_character_flag = hanfan_huazhou_pingyi } }
				}
				default = {
					localization_key = hanfan_tongzhou_pingyi
					trigger = { scope:recipient = { has_character_flag = hanfan_tongzhou_pingyi } }
				}
				default = {
					localization_key = hanfan_binzhou_qin
					trigger = { scope:recipient = { has_character_flag = hanfan_binzhou_qin } }
				}
				default = {
					localization_key = hanfan_qingzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_qingzhou } }
				}
				default = {
					localization_key = hanfan_ningzhou_qin
					trigger = { scope:recipient = { has_character_flag = hanfan_ningzhou_qin } }
				}
				default = {
					localization_key = hanfan_fuzhou_qin
					trigger = { scope:recipient = { has_character_flag = hanfan_fuzhou_qin } }
				}
				default = {
					localization_key = hanfan_yanzhou_xia
					trigger = { scope:recipient = { has_character_flag = hanfan_yanzhou_xia } }
				}
				default = {
					localization_key = hanfan_fangzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_fangzhou } }
				}
				default = {
					localization_key = hanfan_danzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_danzhou } }
				}
				default = {
					localization_key = hanfan_shangzhou_qin
					trigger = { scope:recipient = { has_character_flag = hanfan_shangzhou_qin } }
				}
				default = {
					localization_key = hanfan_jinzhou_hanzhong
					trigger = { scope:recipient = { has_character_flag = hanfan_jinzhou_hanzhong } }
				}
				default = {
					localization_key = hanfan_chengdu
					trigger = { scope:recipient = { has_character_flag = hanfan_chengdu } }
				}
				default = {
					localization_key = hanfan_hanzhou_shu
					trigger = { scope:recipient = { has_character_flag = hanfan_hanzhou_shu } }
				}
				default = {
					localization_key = hanfan_pengzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_pengzhou } }
				}
				default = {
					localization_key = hanfan_qingchengshan
					trigger = { scope:recipient = { has_character_flag = hanfan_qingchengshan } }
				}
				default = {
					localization_key = hanfan_jianzhou_shu2
					trigger = { scope:recipient = { has_character_flag = hanfan_jianzhou_shu2 } }
				}
				default = {
					localization_key = hanfan_zizhou_xichuan
					trigger = { scope:recipient = { has_character_flag = hanfan_zizhou_xichuan } }
				}
				default = {
					localization_key = hanfan_meizhou_xichuan
					trigger = { scope:recipient = { has_character_flag = hanfan_meizhou_xichuan } }
				}
				default = {
					localization_key = hanfan_jiazhou_xichuan
					trigger = { scope:recipient = { has_character_flag = hanfan_jiazhou_xichuan } }
				}
				default = {
					localization_key = hanfan_nanzheng
					trigger = { scope:recipient = { has_character_flag = hanfan_nanzheng } }
				}
				default = {
					localization_key = hanfan_fengzhou_hanzhong
					trigger = { scope:recipient = { has_character_flag = hanfan_fengzhou_hanzhong } }
				}
				default = {
					localization_key = hanfan_xingzhou_hanzhong
					trigger = { scope:recipient = { has_character_flag = hanfan_xingzhou_hanzhong } }
				}
				default = {
					localization_key = hanfan_lizhou_hanzhong
					trigger = { scope:recipient = { has_character_flag = hanfan_lizhou_hanzhong } }
				}
				default = {
					localization_key = hanfan_yangzhou_hanzhong
					trigger = { scope:recipient = { has_character_flag = hanfan_yangzhou_hanzhong } }
				}
				default = {
					localization_key = hanfan_longzhou_shu
					trigger = { scope:recipient = { has_character_flag = hanfan_longzhou_shu } }
				}
				default = {
					localization_key = hanfan_jianzhou_shu
					trigger = { scope:recipient = { has_character_flag = hanfan_jianzhou_shu } }
				}
				default = {
					localization_key = hanfan_mianzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_mianzhou } }
				}
				default = {
					localization_key = hanfan_zizhou_dongchuan
					trigger = { scope:recipient = { has_character_flag = hanfan_zizhou_dongchuan } }
				}
				default = {
					localization_key = hanfan_suizhou_dongchuan
					trigger = { scope:recipient = { has_character_flag = hanfan_suizhou_dongchuan } }
				}
				default = {
					localization_key = hanfan_puzhou_dongchuan
					trigger = { scope:recipient = { has_character_flag = hanfan_puzhou_dongchuan } }
				}
				default = {
					localization_key = hanfan_luzhou_dongchuan
					trigger = { scope:recipient = { has_character_flag = hanfan_luzhou_dongchuan } }
				}
				default = {
					localization_key = hanfan_siezhou
					trigger = { scope:recipient = { has_character_flag = hanfan_siezhou } }
				}
				default = {
					localization_key = hanfan_xizhou_dongchuan
					trigger = { scope:recipient = { has_character_flag = hanfan_xizhou_dongchuan } }
				}
				default = {
					localization_key = hanfan_lingzhou_xichuan
					trigger = { scope:recipient = { has_character_flag = hanfan_lingzhou_xichuan } }
				}
				default = {
					localization_key = hanfan_rongzhou_xichuan
					trigger = { scope:recipient = { has_character_flag = hanfan_rongzhou_xichuan } }
				}
				default = {
					localization_key = hanfan_yazhou
					trigger = { scope:recipient = { has_character_flag = hanfan_yazhou } }
				}
				default = {
					localization_key = hanfan_lizhou_shu
					trigger = { scope:recipient = { has_character_flag = hanfan_lizhou_shu } }
				}
				default = {
					localization_key = hanfan_qiongzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_qiongzhou } }
				}
				default = {
					localization_key = hanfan_bazhou_ba
					trigger = { scope:recipient = { has_character_flag = hanfan_bazhou_ba } }
				}
				default = {
					localization_key = hanfan_langzhou_ba
					trigger = { scope:recipient = { has_character_flag = hanfan_langzhou_ba } }
				}
				default = {
					localization_key = hanfan_guozhou_ba
					trigger = { scope:recipient = { has_character_flag = hanfan_guozhou_ba } }
				}
				default = {
					localization_key = hanfan_quzhou_ba
					trigger = { scope:recipient = { has_character_flag = hanfan_quzhou_ba } }
				}
				default = {
					localization_key = hanfan_hezhou_ba
					trigger = { scope:recipient = { has_character_flag = hanfan_hezhou_ba } }
				}
				default = {
					localization_key = hanfan_yuzhou_ba
					trigger = { scope:recipient = { has_character_flag = hanfan_yuzhou_ba } }
				}
				default = {
					localization_key = hanfan_fuzhou_ba
					trigger = { scope:recipient = { has_character_flag = hanfan_fuzhou_ba } }
				}
				default = {
					localization_key = hanfan_fuzhou_ba
					trigger = { scope:recipient = { has_character_flag = hanfan_fuzhou_ba } }
				}
				default = {
					localization_key = hanfan_zhongzhou_ba
					trigger = { scope:recipient = { has_character_flag = hanfan_zhongzhou_ba } }
				}
				default = {
					localization_key = hanfan_zhongzhou_ba
					trigger = { scope:recipient = { has_character_flag = hanfan_zhongzhou_ba } }
				}
				default = {
					localization_key = hanfan_wanzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_wanzhou } }
				}
				default = {
					localization_key = hanfan_zigui
					trigger = { scope:recipient = { has_character_flag = hanfan_zigui } }
				}
				default = {
					localization_key = hanfan_ruzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_ruzhou } }
				}
				default = {
					localization_key = hanfan_luoyang
					trigger = { scope:recipient = { has_character_flag = hanfan_luoyang } }
				}
				default = {
					localization_key = hanfan_guozhou_zhou
					trigger = { scope:recipient = { has_character_flag = hanfan_guozhou_zhou } }
				}
				default = {
					localization_key = hanfan_shaanzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_shaanzhou } }
				}
				default = {
					localization_key = hanfan_zhengzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_zhengzhou } }
				}
				default = {
					localization_key = hanfan_huazhou_liang
					trigger = { scope:recipient = { has_character_flag = hanfan_huazhou_liang } }
				}
				default = {
					localization_key = hanfan_mengzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_mengzhou } }
				}
				default = {
					localization_key = hanfan_huaizhou_zhou
					trigger = { scope:recipient = { has_character_flag = hanfan_huaizhou_zhou } }
				}
				default = {
					localization_key = hanfan_xuuzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_xuuzhou } }
				}
				default = {
					localization_key = hanfan_caizhou
					trigger = { scope:recipient = { has_character_flag = hanfan_caizhou } }
				}
				default = {
					localization_key = hanfan_chenzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_chenzhou } }
				}
				default = {
					localization_key = hanfan_bianzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_bianzhou } }
				}
				default = {
					localization_key = hanfan_songzhou_song
					trigger = { scope:recipient = { has_character_flag = hanfan_songzhou_song } }
				}
				default = {
					localization_key = hanfan_bozhou_song
					trigger = { scope:recipient = { has_character_flag = hanfan_bozhou_song } }
				}
				default = {
					localization_key = hanfan_yingzhou_song
					trigger = { scope:recipient = { has_character_flag = hanfan_yingzhou_song } }
				}
				default = {
					localization_key = hanfan_puzhou_liang
					trigger = { scope:recipient = { has_character_flag = hanfan_puzhou_liang } }
				}
				default = {
					localization_key = hanfan_yunzhou_liang
					trigger = { scope:recipient = { has_character_flag = hanfan_yunzhou_liang } }
				}
				default = {
					localization_key = hanfan_jizhou_liang
					trigger = { scope:recipient = { has_character_flag = hanfan_jizhou_liang } }
				}
				default = {
					localization_key = hanfan_caozhou
					trigger = { scope:recipient = { has_character_flag = hanfan_caozhou } }
				}
				default = {
					localization_key = hanfan_xuzhou_xu
					trigger = { scope:recipient = { has_character_flag = hanfan_xuzhou_xu } }
				}
				default = {
					localization_key = hanfan_sizhou_xu
					trigger = { scope:recipient = { has_character_flag = hanfan_sizhou_xu } }
				}
				default = {
					localization_key = hanfan_qingzhou_qi
					trigger = { scope:recipient = { has_character_flag = hanfan_qingzhou_qi } }
				}
				default = {
					localization_key = hanfan_zibo
					trigger = { scope:recipient = { has_character_flag = hanfan_zibo } }
				}
				default = {
					localization_key = hanfan_qizhou_qi
					trigger = { scope:recipient = { has_character_flag = hanfan_qizhou_qi } }
				}
				default = {
					localization_key = hanfan_laizhou
					trigger = { scope:recipient = { has_character_flag = hanfan_laizhou } }
				}
				default = {
					localization_key = hanfan_penglai
					trigger = { scope:recipient = { has_character_flag = hanfan_penglai } }
				}
				default = {
					localization_key = hanfan_mizhou_qi
					trigger = { scope:recipient = { has_character_flag = hanfan_mizhou_qi } }
				}
				default = {
					localization_key = hanfan_yanzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_yanzhou } }
				}
				default = {
					localization_key = hanfan_yizhou_taining
					trigger = { scope:recipient = { has_character_flag = hanfan_yizhou_taining } }
				}
				default = {
					localization_key = hanfan_haizhou_xu
					trigger = { scope:recipient = { has_character_flag = hanfan_haizhou_xu } }
				}
				default = {
					localization_key = hanfan_xiangfan
					trigger = { scope:recipient = { has_character_flag = hanfan_xiangfan } }
				}
				default = {
					localization_key = hanfan_junzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_junzhou } }
				}
				default = {
					localization_key = hanfan_fangzhou_chu
					trigger = { scope:recipient = { has_character_flag = hanfan_fangzhou_chu } }
				}
				default = {
					localization_key = hanfan_dengzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_dengzhou } }
				}
				default = {
					localization_key = hanfan_tangzhou_chu
					trigger = { scope:recipient = { has_character_flag = hanfan_tangzhou_chu } }
				}
				default = {
					localization_key = hanfan_suizhou
					trigger = { scope:recipient = { has_character_flag = hanfan_suizhou } }
				}
				default = {
					localization_key = hanfan_jingzhou_chu
					trigger = { scope:recipient = { has_character_flag = hanfan_jingzhou_chu } }
				}
				default = {
					localization_key = hanfan_yingzhou_chu
					trigger = { scope:recipient = { has_character_flag = hanfan_yingzhou_chu } }
				}
				default = {
					localization_key = hanfan_fuzhou_chu
					trigger = { scope:recipient = { has_character_flag = hanfan_fuzhou_chu } }
				}
				default = {
					localization_key = hanfan_xiazhou_chu
					trigger = { scope:recipient = { has_character_flag = hanfan_xiazhou_chu } }
				}
				default = {
					localization_key = hanfan_lizhou_chu
					trigger = { scope:recipient = { has_character_flag = hanfan_lizhou_chu } }
				}
				default = {
					localization_key = hanfan_langzhou_chu
					trigger = { scope:recipient = { has_character_flag = hanfan_langzhou_chu } }
				}
				default = {
					localization_key = hanfan_ezhou
					trigger = { scope:recipient = { has_character_flag = hanfan_ezhou } }
				}
				default = {
					localization_key = hanfan_anzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_anzhou } }
				}
				default = {
					localization_key = hanfan_shenzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_shenzhou } }
				}
				default = {
					localization_key = hanfan_huangzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_huangzhou } }
				}
				default = {
					localization_key = hanfan_qichun
					trigger = { scope:recipient = { has_character_flag = hanfan_qichun } }
				}
				default = {
					localization_key = hanfan_yuezhou_chu
					trigger = { scope:recipient = { has_character_flag = hanfan_yuezhou_chu } }
				}
				default = {
					localization_key = hanfan_changsha
					trigger = { scope:recipient = { has_character_flag = hanfan_changsha } }
				}
				default = {
					localization_key = hanfan_hengshan
					trigger = { scope:recipient = { has_character_flag = hanfan_hengshan } }
				}
				default = {
					localization_key = hanfan_chenzhou_hunan
					trigger = { scope:recipient = { has_character_flag = hanfan_chenzhou_hunan } }
				}
				default = {
					localization_key = hanfan_lianzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_lianzhou } }
				}
				default = {
					localization_key = hanfan_daozhou
					trigger = { scope:recipient = { has_character_flag = hanfan_daozhou } }
				}
				default = {
					localization_key = hanfan_yongzhou_hunan
					trigger = { scope:recipient = { has_character_flag = hanfan_yongzhou_hunan } }
				}
				default = {
					localization_key = hanfan_shaozhou_hunan
					trigger = { scope:recipient = { has_character_flag = hanfan_shaozhou_hunan } }
				}
				default = {
					localization_key = hanfan_yangzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_yangzhou } }
				}
				default = {
					localization_key = hanfan_haozhou_huainan
					trigger = { scope:recipient = { has_character_flag = hanfan_haozhou_huainan } }
				}
				default = {
					localization_key = hanfan_huaiyin
					trigger = { scope:recipient = { has_character_flag = hanfan_huaiyin } }
				}
				default = {
					localization_key = hanfan_chuzhou_huai
					trigger = { scope:recipient = { has_character_flag = hanfan_chuzhou_huai } }
				}
				default = {
					localization_key = hanfan_shouchun
					trigger = { scope:recipient = { has_character_flag = hanfan_shouchun } }
				}
				default = {
					localization_key = hanfan_luzhou_huai
					trigger = { scope:recipient = { has_character_flag = hanfan_luzhou_huai } }
				}
				default = {
					localization_key = hanfan_guangzhou_huainan
					trigger = { scope:recipient = { has_character_flag = hanfan_guangzhou_huainan } }
				}
				default = {
					localization_key = hanfan_shuzhou_huai
					trigger = { scope:recipient = { has_character_flag = hanfan_shuzhou_huai } }
				}
				default = {
					localization_key = hanfan_suzhou_wu
					trigger = { scope:recipient = { has_character_flag = hanfan_suzhou_wu } }
				}
				default = {
					localization_key = hanfan_jinling
					trigger = { scope:recipient = { has_character_flag = hanfan_jinling } }
				}
				default = {
					localization_key = hanfan_runzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_runzhou } }
				}
				default = {
					localization_key = hanfan_changzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_changzhou } }
				}
				default = {
					localization_key = hanfan_huzhou_wu
					trigger = { scope:recipient = { has_character_flag = hanfan_huzhou_wu } }
				}
				default = {
					localization_key = hanfan_xuanzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_xuanzhou } }
				}
				default = {
					localization_key = hanfan_shezhou
					trigger = { scope:recipient = { has_character_flag = hanfan_shezhou } }
				}
				default = {
					localization_key = hanfan_guangde
					trigger = { scope:recipient = { has_character_flag = hanfan_guangde } }
				}
				default = {
					localization_key = hanfan_hongzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_hongzhou } }
				}
				default = {
					localization_key = hanfan_jiangzhou_wu
					trigger = { scope:recipient = { has_character_flag = hanfan_jiangzhou_wu } }
				}
				default = {
					localization_key = hanfan_raozhou
					trigger = { scope:recipient = { has_character_flag = hanfan_raozhou } }
				}
				default = {
					localization_key = hanfan_fuzhou_jiangxi
					trigger = { scope:recipient = { has_character_flag = hanfan_fuzhou_jiangxi } }
				}
				default = {
					localization_key = hanfan_yuanzhou_jiangxi
					trigger = { scope:recipient = { has_character_flag = hanfan_yuanzhou_jiangxi } }
				}
				default = {
					localization_key = hanfan_jizhou_jiangxi
					trigger = { scope:recipient = { has_character_flag = hanfan_jizhou_jiangxi } }
				}
				default = {
					localization_key = hanfan_qianzhou_jiangxi
					trigger = { scope:recipient = { has_character_flag = hanfan_qianzhou_jiangxi } }
				}
				default = {
					localization_key = hanfan_hangzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_hangzhou } }
				}
				default = {
					localization_key = hanfan_wuzhou_yue
					trigger = { scope:recipient = { has_character_flag = hanfan_wuzhou_yue } }
				}
				default = {
					localization_key = hanfan_muzhou_yue
					trigger = { scope:recipient = { has_character_flag = hanfan_muzhou_yue } }
				}
				default = {
					localization_key = hanfan_quzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_quzhou } }
				}
				default = {
					localization_key = hanfan_yuezhou_yue
					trigger = { scope:recipient = { has_character_flag = hanfan_yuezhou_yue } }
				}
				default = {
					localization_key = hanfan_mingzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_mingzhou } }
				}
				default = {
					localization_key = hanfan_taizhou
					trigger = { scope:recipient = { has_character_flag = hanfan_taizhou } }
				}
				default = {
					localization_key = hanfan_wenzhou_yue
					trigger = { scope:recipient = { has_character_flag = hanfan_wenzhou_yue } }
				}
				default = {
					localization_key = hanfan_kuozhou_yue
					trigger = { scope:recipient = { has_character_flag = hanfan_kuozhou_yue } }
				}
				default = {
					localization_key = hanfan_fuzou
					trigger = { scope:recipient = { has_character_flag = hanfan_fuzou } }
				}
				default = {
					localization_key = hanfan_quanzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_quanzhou } }
				}
				default = {
					localization_key = hanfan_zhangzhou_min
					trigger = { scope:recipient = { has_character_flag = hanfan_zhangzhou_min } }
				}
				default = {
					localization_key = hanfan_jianzhou_min
					trigger = { scope:recipient = { has_character_flag = hanfan_jianzhou_min } }
				}
				default = {
					localization_key = hanfan_tingzhou_min
					trigger = { scope:recipient = { has_character_flag = hanfan_tingzhou_min } }
				}
				default = {
					localization_key = hanfan_qianzhong
					trigger = { scope:recipient = { has_character_flag = hanfan_qianzhong } }
				}
				default = {
					localization_key = hanfan_enshi
					trigger = { scope:recipient = { has_character_flag = hanfan_enshi } }
				}
				default = {
					localization_key = hanfan_sizhou_qian
					trigger = { scope:recipient = { has_character_flag = hanfan_sizhou_qian } }
				}
				default = {
					localization_key = hanfan_bozhou_zunyi
					trigger = { scope:recipient = { has_character_flag = hanfan_bozhou_zunyi } }
				}
				default = {
					localization_key = hanfan_ligao
					trigger = { scope:recipient = { has_character_flag = hanfan_ligao } }
				}
				default = {
					localization_key = hanfan_rongyi
					trigger = { scope:recipient = { has_character_flag = hanfan_rongyi } }
				}
				default = {
					localization_key = hanfan_pingyi
					trigger = { scope:recipient = { has_character_flag = hanfan_pingyi } }
				}
				default = {
					localization_key = hanfan_langxi
					trigger = { scope:recipient = { has_character_flag = hanfan_langxi } }
				}
				default = {
					localization_key = hanfan_xizhou_qian
					trigger = { scope:recipient = { has_character_flag = hanfan_xizhou_qian } }
				}
				default = {
					localization_key = hanfan_chenxi
					trigger = { scope:recipient = { has_character_flag = hanfan_chenxi } }
				}
				default = {
					localization_key = hanfan_luyang
					trigger = { scope:recipient = { has_character_flag = hanfan_luyang } }
				}
				default = {
					localization_key = hanfan_yelang
					trigger = { scope:recipient = { has_character_flag = hanfan_yelang } }
				}
				default = {
					localization_key = hanfan_juzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_juzhou } }
				}
				default = {
					localization_key = hanfan_qianxi
					trigger = { scope:recipient = { has_character_flag = hanfan_qianxi } }
				}
				default = {
					localization_key = hanfan_panjiang
					trigger = { scope:recipient = { has_character_flag = hanfan_panjiang } }
				}
				default = {
					localization_key = hanfan_nanhai
					trigger = { scope:recipient = { has_character_flag = hanfan_nanhai } }
				}
				default = {
					localization_key = hanfan_shaoguan_guang
					trigger = { scope:recipient = { has_character_flag = hanfan_shaoguan_guang } }
				}
				default = {
					localization_key = hanfan_duanzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_duanzhou } }
				}
				default = {
					localization_key = hanfan_xinhui
					trigger = { scope:recipient = { has_character_flag = hanfan_xinhui } }
				}
				default = {
					localization_key = hanfan_chaozhou
					trigger = { scope:recipient = { has_character_flag = hanfan_chaozhou } }
				}
				default = {
					localization_key = hanfan_haka
					trigger = { scope:recipient = { has_character_flag = hanfan_haka } }
				}
				default = {
					localization_key = hanfan_xunzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_xunzhou } }
				}
				default = {
					localization_key = hanfan_qiongya
					trigger = { scope:recipient = { has_character_flag = hanfan_qiongya } }
				}
				default = {
					localization_key = hanfan_gaozhou
					trigger = { scope:recipient = { has_character_flag = hanfan_gaozhou } }
				}
				default = {
					localization_key = hanfan_rongzhou_gui
					trigger = { scope:recipient = { has_character_flag = hanfan_rongzhou_gui } }
				}
				default = {
					localization_key = hanfan_yulinzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_yulinzhou } }
				}
				default = {
					localization_key = hanfan_guilin
					trigger = { scope:recipient = { has_character_flag = hanfan_guilin } }
				}
				default = {
					localization_key = hanfan_changwu
					trigger = { scope:recipient = { has_character_flag = hanfan_changwu } }
				}
				default = {
					localization_key = hanfan_liuzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_liuzhou } }
				}
				default = {
					localization_key = hanfan_rongshui
					trigger = { scope:recipient = { has_character_flag = hanfan_rongshui } }
				}
				default = {
					localization_key = hanfan_nanning
					trigger = { scope:recipient = { has_character_flag = hanfan_nanning } }
				}
				default = {
					localization_key = hanfan_qinzhou_gui
					trigger = { scope:recipient = { has_character_flag = hanfan_qinzhou_gui } }
				}
				default = {
					localization_key = hanfan_binzhou_gui
					trigger = { scope:recipient = { has_character_flag = hanfan_binzhou_gui } }
				}
				default = {
					localization_key = hanfan_luolong
					trigger = { scope:recipient = { has_character_flag = hanfan_luolong } }
				}
				default = {
					localization_key = hanfan_baise
					trigger = { scope:recipient = { has_character_flag = hanfan_baise } }
				}
				default = {
					localization_key = hanfan_luzhou_annan
					trigger = { scope:recipient = { has_character_flag = hanfan_luzhou_annan } }
				}
				default = {
					localization_key = hanfan_jiaozhi
					trigger = { scope:recipient = { has_character_flag = hanfan_jiaozhi } }
				}
				default = {
					localization_key = hanfan_jinlongzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_jinlongzhou } }
				}
				default = {
					localization_key = hanfan_lang_giang
					trigger = { scope:recipient = { has_character_flag = hanfan_lang_giang } }
				}
				default = {
					localization_key = hanfan_wuan
					trigger = { scope:recipient = { has_character_flag = hanfan_wuan } }
				}
				default = {
					localization_key = hanfan_gantang
					trigger = { scope:recipient = { has_character_flag = hanfan_gantang } }
				}
				default = {
					localization_key = hanfan_cuu_chan
					trigger = { scope:recipient = { has_character_flag = hanfan_cuu_chan } }
				}
				default = {
					localization_key = hanfan_cu_duc
					trigger = { scope:recipient = { has_character_flag = hanfan_cu_duc } }
				}
				default = {
					localization_key = hanfan_tanglinzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_tanglinzhou } }
				}
				default = {
					localization_key = hanfan_riluo
					trigger = { scope:recipient = { has_character_flag = hanfan_riluo } }
				}
				default = {
					localization_key = hanfan_hezhou
					trigger = { scope:recipient = { has_character_flag = hanfan_hezhou } }
				}
				default = {
					localization_key = hanfan_lanzhou_longxi
					trigger = { scope:recipient = { has_character_flag = hanfan_lanzhou_longxi } }
				}
				default = {
					localization_key = hanfan_nongdong
					trigger = { scope:recipient = { has_character_flag = hanfan_nongdong } }
				}
				default = {
					localization_key = hanfan_huichuan
					trigger = { scope:recipient = { has_character_flag = hanfan_huichuan } }
				}
				default = {
					localization_key = hanfan_ruanhua
					trigger = { scope:recipient = { has_character_flag = hanfan_ruanhua } }
				}
				default = {
					localization_key = hanfan_shanchan
					trigger = { scope:recipient = { has_character_flag = hanfan_shanchan } }
				}
				default = {
					localization_key = hanfan_laos
					trigger = { scope:recipient = { has_character_flag = hanfan_laos } }
				}
				default = {
					localization_key = hanfan_xingqing
					trigger = { scope:recipient = { has_character_flag = hanfan_xingqing } }
				}
				default = {
					localization_key = hanfan_liangzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_liangzhou } }
				}
				default = {
					localization_key = hanfan_ganzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_ganzhou } }
				}
				default = {
					localization_key = hanfan_suzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_suzhou } }
				}
				default = {
					localization_key = hanfan_guazhou
					trigger = { scope:recipient = { has_character_flag = hanfan_guazhou } }
				}
				default = {
					localization_key = hanfan_shazhou
					trigger = { scope:recipient = { has_character_flag = hanfan_shazhou } }
				}
				default = {
					localization_key = hanfan_shanzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_shanzhou } }
				}
				default = {
					localization_key = hanfan_kuozhou
					trigger = { scope:recipient = { has_character_flag = hanfan_kuozhou } }
				}
				default = {
					localization_key = hanfan_chamil
					trigger = { scope:recipient = { has_character_flag = hanfan_chamil } }
				}
				default = {
					localization_key = hanfan_kara_khoja
					trigger = { scope:recipient = { has_character_flag = hanfan_kara_khoja } }
				}
				default = {
					localization_key = hanfan_beshbalik
					trigger = { scope:recipient = { has_character_flag = hanfan_beshbalik } }
				}
				default = {
					localization_key = hanfan_xinzhou_wu
					trigger = { scope:recipient = { has_character_flag = hanfan_xinzhou_wu } }
				}
				default = {
					localization_key = hanfan_chizhou
					trigger = { scope:recipient = { has_character_flag = hanfan_chizhou } }
				}
				default = {
					localization_key = hanfan_hezhou_huai
					trigger = { scope:recipient = { has_character_flag = hanfan_hezhou_huai } }
				}
				default = {
					localization_key = hanfan_suzhou_xu
					trigger = { scope:recipient = { has_character_flag = hanfan_suzhou_xu } }
				}
				default = {
					localization_key = hanfan_chanzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_chanzhou } }
				}
				default = {
					localization_key = hanfan_lianzhou_gui
					trigger = { scope:recipient = { has_character_flag = hanfan_lianzhou_gui } }
				}
				default = {
					localization_key = hanfan_luanzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_luanzhou } }
				}
				default = {
					localization_key = hanfan_yaozhou
					trigger = { scope:recipient = { has_character_flag = hanfan_yaozhou } }
				}
				default = {
					localization_key = hanfan_gaizhou
					trigger = { scope:recipient = { has_character_flag = hanfan_gaizhou } }
				}
				default = {
					localization_key = hanfan_kuizhou
					trigger = { scope:recipient = { has_character_flag = hanfan_kuizhou } }
				}
				default = {
					localization_key = hanfan_danzhou_hainan
					trigger = { scope:recipient = { has_character_flag = hanfan_danzhou_hainan } }
				}
				default = {
					localization_key = hanfan_zhenzhou_hainan
					trigger = { scope:recipient = { has_character_flag = hanfan_zhenzhou_hainan } }
				}
				default = {
					localization_key = hanfan_leizhou
					trigger = { scope:recipient = { has_character_flag = hanfan_leizhou } }
				}
				default = {
					localization_key = hanfan_tengzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_tengzhou } }
				}
				default = {
					localization_key = hanfan_guizhou_yulin
					trigger = { scope:recipient = { has_character_flag = hanfan_guizhou_yulin } }
				}
				default = {
					localization_key = hanfan_waizao
					trigger = { scope:recipient = { has_character_flag = hanfan_waizao } }
				}
				default = {
					localization_key = hanfan_qingzhou_qian
					trigger = { scope:recipient = { has_character_flag = hanfan_qingzhou_qian } }
				}
				default = {
					localization_key = hanfan_jiangzhou_kaili
					trigger = { scope:recipient = { has_character_flag = hanfan_jiangzhou_kaili } }
				}
				default = {
					localization_key = hanfan_xiuzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_xiuzhou } }
				}
				default = {
					localization_key = hanfan_nantong
					trigger = { scope:recipient = { has_character_flag = hanfan_nantong } }
				}
				default = {
					localization_key = hanfan_shanfu
					trigger = { scope:recipient = { has_character_flag = hanfan_shanfu } }
				}
				default = {
					localization_key = hanfan_beihai
					trigger = { scope:recipient = { has_character_flag = hanfan_beihai } }
				}
				default = {
					localization_key = hanfan_yongjingjun
					trigger = { scope:recipient = { has_character_flag = hanfan_yongjingjun } }
				}
				default = {
					localization_key = hanfan_baoding
					trigger = { scope:recipient = { has_character_flag = hanfan_baoding } }
				}
				default = {
					localization_key = hanfan_guzhu
					trigger = { scope:recipient = { has_character_flag = hanfan_guzhu } }
				}
				default = {
					localization_key = hanfan_miyun
					trigger = { scope:recipient = { has_character_flag = hanfan_miyun } }
				}
				default = {
					localization_key = hanfan_tongzhou_yan
					trigger = { scope:recipient = { has_character_flag = hanfan_tongzhou_yan } }
				}
				default = {
					localization_key = hanfan_zhuozhou
					trigger = { scope:recipient = { has_character_flag = hanfan_zhuozhou } }
				}
				default = {
					localization_key = hanfan_Luanzhou_Yan
					trigger = { scope:recipient = { has_character_flag = hanfan_Luanzhou_Yan } }
				}
				default = {
					localization_key = hanfan_Xinzhou_Fengsheng
					trigger = { scope:recipient = { has_character_flag = hanfan_Xinzhou_Fengsheng } }
				}
				default = {
					localization_key = hanfan_Wuzhou_Guihua
					trigger = { scope:recipient = { has_character_flag = hanfan_Wuzhou_Guihua } }
				}
				default = {
					localization_key = hanfan_Ruzhou_yan
					trigger = { scope:recipient = { has_character_flag = hanfan_Ruzhou_yan } }
				}
				default = {
					localization_key = hanfan_yongzhou_changning
					trigger = { scope:recipient = { has_character_flag = hanfan_yongzhou_changning } }
				}
				default = {
					localization_key = hanfan_Sheenzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_Sheenzhou } }
				}
				default = {
					localization_key = hanfan_giao_chau
					trigger = { scope:recipient = { has_character_flag = hanfan_giao_chau } }
				}
				default = {
					localization_key = hanfan_truong_chau
					trigger = { scope:recipient = { has_character_flag = hanfan_truong_chau } }
				}
				default = {
					localization_key = hanfan_yizhou_fuxin
					trigger = { scope:recipient = { has_character_flag = hanfan_yizhou_fuxin } }
				}
				default = {
					localization_key = hanfan_qingzhou_liao
					trigger = { scope:recipient = { has_character_flag = hanfan_qingzhou_liao } }
				}
				default = {
					localization_key = hanfan_laibin
					trigger = { scope:recipient = { has_character_flag = hanfan_laibin } }
				}
				default = {
					localization_key = hanfan_hailing
					trigger = { scope:recipient = { has_character_flag = hanfan_hailing } }
				}
				default = {
					localization_key = hanfan_nanjianzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_nanjianzhou } }
				}
				default = {
					localization_key = hanfan_yinping
					trigger = { scope:recipient = { has_character_flag = hanfan_yinping } }
				}
				default = {
					localization_key = hanfan_hanyang
					trigger = { scope:recipient = { has_character_flag = hanfan_hanyang } }
				}
				default = {
					localization_key = hanfan_wuluhai
					trigger = { scope:recipient = { has_character_flag = hanfan_wuluhai } }
				}
				default = {
					localization_key = hanfan_jone
					trigger = { scope:recipient = { has_character_flag = hanfan_jone } }
				}
				default = {
					localization_key = hanfan_shunzhou
					trigger = { scope:recipient = { has_character_flag = hanfan_shunzhou } }
				}
				default = {
					localization_key = hanfan_xingqing
					trigger = { scope:recipient = { has_character_flag = hanfan_xingqing } }
				}
				default = {
					localization_key = hanfan_wuda
					trigger = { scope:recipient = { has_character_flag = hanfan_wuda } }
				}
				default = {
					localization_key = hanfan_huaiyang
					trigger = { scope:recipient = { has_character_flag = hanfan_huaiyang } }
				}
				default = {
					localization_key = hanfan_pyongyang
					trigger = { scope:recipient = { has_character_flag = hanfan_pyongyang } }
				}
			}
		}
		setup_scope = {
			scope:death_man = { save_scope_as = text_target }
		}
	}

	option = { 
		name = fengjue_nickname_interaction
		scope:death_man = {
			if = {
				# We entered custom text into the pop up
				limit = {
					sino_royal_menber_of_actor_trigger = yes
					NOT = { has_variable = custom_zunhao_new }
				}
				set_variable = {
					name = custom_zunhao_new
					value = flag:custom
				}
			}
			else_if = {
				# We entered custom text into the pop up
				limit = {
					NOT = { has_variable = custom_zunhao_new }
				}
				if = {
					limit = { has_any_nickname = yes }
					remove_nickname = yes
				}
				set_nickname_effect = { NICKNAME = custom_zunhao_new }
			}
		}
	}

	option = { 
		name = cancel
	}

	after = {
		scope:recipient = { remove_fenghao_flag = yes }
	}
}